+++
title = "mysql 聚簇索引"
date = "2016-04-15T05:21:44+08:00"
tags = ["mysql"]

+++


### 一、什么是聚簇索引？

百科定义：聚簇索引也叫簇类索引，是一种对磁盘上实际数据重新组织以按指定的一个或多个列的值排序。由于聚簇索引的索引页面指针指向数据页面，所以使用聚簇索引查找数据几乎总是比使用非聚簇索引快。每张表只能建一个聚簇索引，并且建聚簇索引需要至少相当该表120%的附加空间，以存放该表的副本和索引中间页。

### 二、特点：

* 聚簇索引确定表中数据的物理顺序
* 一个表只能包含一个聚簇索引
* 聚簇索引对于那些经常要搜索范围值的列特别有效（数据在物理上是顺序的）

### 三、组织形式

聚簇索引是一种数据存储方式，它实际上是在同一个结构中保存了B+树索引和数据行，InnoDB表是按照聚簇索引组织的。InnoDB通过主键聚簇数据，如果没有定义主键，会选择一个唯一的非空索引代替，如图：

![组织结构图](http://ww3.sinaimg.cn/large/68faff51jw1f2w8ellxmjj20jc0gnwfg.jpg)

### 四、缺点
* 插入速度严重依赖于插入顺序，按照主键的顺序插入到数据表中速度是最快的。
* 更新聚簇索引列的代价很高，因为需要移动新的数据。
* 在插入新行，或者主键更新需要移动行的时候，可能导致页分裂，从而导致占用更多的磁盘空间。
* 二级索引（非聚簇）可能比想象的要大，因为二级索引的叶子节点中包含了引用行的主键列。
* 二级索引访问需要2次索引查找，而不是一次，因为二级索引保存的不是行的物理位置，而是主键值。

