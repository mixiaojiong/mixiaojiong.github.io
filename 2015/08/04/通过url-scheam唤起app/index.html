<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>通过URL scheam唤起App &middot; xiaojiong</title>
        <meta name="description" content="URI scheam 是什么？详情见https://en.wikipedia.org/wiki/URI_scheme。通俗的讲：
 http:// 打开的是网址。 qq://打开的是qq： mail:://打开的是邮箱  实现方式 1.1 安卓：为Android应用的启动Activity设置一个Schema，如下：
&lt;data android:host=&quot;splash&quot; android:scheme=&quot;youselfname&quot;/&gt;  1.2 苹果：参考
http://objcio.com/blog/2015/05/21/the-complete-tutorial-on-ios-slash-iphone-custom-url-schemes/  2.用户点击浏览器中的链接时，在动态创建一个不可见的iframe，并且让这个iframe去加载步骤1中的Schema 3.如果在指定的时间内没有跳转成功，则当前页跳转到apk的下载地址（或下载页） 4.html代码
&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt; &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt; &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt; &lt;title&gt;scheam&lt;/title&gt; &lt;meta id=&quot;viewport&quot; name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt; &lt;!--a id=&quot;J-call-app&quot; href=&quot;javascript:;&quot; class=&quot;label&quot;&gt;立即打开&amp;gt;&amp;gt;&lt;/a--&gt; &lt;input id=&quot;J-download-app-adr&quot; type=&quot;hidden&quot; name=&quot;storeurl&quot; value=&quot;downloadUrl&quot;&gt; &lt;input id=&quot;J-download-app-ios&quot; type=&quot;hidden&quot; name=&quot;storeurl&quot; value=&quot;https://itunes.apple.com/us/app/yi-ke/id911325680?l=zh&amp;ls=1&amp;mt=8&quot;&gt; &lt;/div&gt; &lt;script&gt; (function() { var ua = navigator.userAgent.toLowerCase(); var t; var config = { /*scheme:必须*/ scheme_IOS: &#39;youselfname://&#39;, scheme_Adr: &#39;youselfname//splash&#39;, download_url: document.">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.17" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="通过URL scheam唤起App">
<meta property="og:description" content="URI scheam 是什么？详情见https://en.wikipedia.org/wiki/URI_scheme。通俗的讲：
 http:// 打开的是网址。 qq://打开的是qq： mail:://打开的是邮箱  实现方式 1.1 安卓：为Android应用的启动Activity设置一个Schema，如下：
&lt;data android:host=&quot;splash&quot; android:scheme=&quot;youselfname&quot;/&gt;  1.2 苹果：参考
http://objcio.com/blog/2015/05/21/the-complete-tutorial-on-ios-slash-iphone-custom-url-schemes/  2.用户点击浏览器中的链接时，在动态创建一个不可见的iframe，并且让这个iframe去加载步骤1中的Schema 3.如果在指定的时间内没有跳转成功，则当前页跳转到apk的下载地址（或下载页） 4.html代码
&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt; &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt; &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt; &lt;title&gt;scheam&lt;/title&gt; &lt;meta id=&quot;viewport&quot; name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt; &lt;!--a id=&quot;J-call-app&quot; href=&quot;javascript:;&quot; class=&quot;label&quot;&gt;立即打开&amp;gt;&amp;gt;&lt;/a--&gt; &lt;input id=&quot;J-download-app-adr&quot; type=&quot;hidden&quot; name=&quot;storeurl&quot; value=&quot;downloadUrl&quot;&gt; &lt;input id=&quot;J-download-app-ios&quot; type=&quot;hidden&quot; name=&quot;storeurl&quot; value=&quot;https://itunes.apple.com/us/app/yi-ke/id911325680?l=zh&amp;ls=1&amp;mt=8&quot;&gt; &lt;/div&gt; &lt;script&gt; (function() { var ua = navigator.userAgent.toLowerCase(); var t; var config = { /*scheme:必须*/ scheme_IOS: &#39;youselfname://&#39;, scheme_Adr: &#39;youselfname//splash&#39;, download_url: document.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://www.xiaojiong.net/2015/08/04/%E9%80%9A%E8%BF%87url-scheam%E5%94%A4%E8%B5%B7app/">
        <link rel="stylesheet" href="http://www.xiaojiong.net/css/normalize.css">
        <link rel="stylesheet" href="http://www.xiaojiong.net/css/highlight.css">
        <link rel="stylesheet" href="http://www.xiaojiong.net/css/style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50430029-1', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="Persistence" href="http://www.xiaojiong.net/">Persistence</a>
                            </h1>
                        
                        <a class="button-square" href="http://www.xiaojiong.net/index.xml"><i class="fa fa-rss"></i></a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/mixiaojiong">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="/page/about/">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">通过URL scheam唤起App</h1>
    
    <p class="post-date">
        <span>Published <time datetime="2015-08-04" itemprop="datePublished">Tue, Aug 4, 2015</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="http://weibo.com/577500331" itemprop="url" rel="author">xiaojiong</a>
            </span>
        </span>
    </p>
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    

<p>URI scheam 是什么？详情见<a href="https://en.wikipedia.org/wiki/URI_scheme。通俗的讲：">https://en.wikipedia.org/wiki/URI_scheme。通俗的讲：</a></p>

<ul>
<li>http:// 打开的是网址。</li>
<li>qq://打开的是qq：</li>
<li>mail:://打开的是邮箱</li>
</ul>

<h3 id="实现方式">实现方式</h3>

<p>1.1 安卓：为Android应用的启动Activity设置一个Schema，如下：</p>

<pre><code>&lt;data android:host=&quot;splash&quot; android:scheme=&quot;youselfname&quot;/&gt; 
</code></pre>

<p>1.2 苹果：参考</p>

<pre><code>http://objcio.com/blog/2015/05/21/the-complete-tutorial-on-ios-slash-iphone-custom-url-schemes/
</code></pre>

<p>2.用户点击浏览器中的链接时，在动态创建一个不可见的iframe，并且让这个iframe去加载步骤1中的Schema
3.如果在指定的时间内没有跳转成功，则当前页跳转到apk的下载地址（或下载页）
4.html代码</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;

    &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;
    &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;

    &lt;title&gt;scheam&lt;/title&gt;
    &lt;meta id=&quot;viewport&quot; name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div&gt;
        &lt;!--a id=&quot;J-call-app&quot; href=&quot;javascript:;&quot; class=&quot;label&quot;&gt;立即打开&amp;gt;&amp;gt;&lt;/a--&gt;
        &lt;input id=&quot;J-download-app-adr&quot; type=&quot;hidden&quot; name=&quot;storeurl&quot; value=&quot;downloadUrl&quot;&gt;
        &lt;input id=&quot;J-download-app-ios&quot; type=&quot;hidden&quot; name=&quot;storeurl&quot; value=&quot;https://itunes.apple.com/us/app/yi-ke/id911325680?l=zh&amp;ls=1&amp;mt=8&quot;&gt;
    &lt;/div&gt;

    &lt;script&gt;
        (function()
        {
            var ua = navigator.userAgent.toLowerCase();
            var t;
            var config = {
                /*scheme:必须*/
                scheme_IOS: 'youselfname://',
                scheme_Adr: 'youselfname//splash',
                download_url: document.getElementById(
                    'J-download-app-adr').value,
                timeout: 600
            };
            config.download_url = ua.indexOf('os') &gt; 0 ? document.getElementById('J-download-app-ios').value :
                    config.download_url;

            function openclient()
            {
                var startTime = Date.now();

                var ifr = document.createElement('iframe');
                

                ifr.src = ua.indexOf('os') &gt; 0 ? config.scheme_IOS :
                    config.scheme_Adr;
                ifr.style.display = 'none';
                document.body.appendChild(ifr);

                var t = setTimeout(function()
                {
                    var endTime = Date.now();

                    if (!startTime || endTime - startTime &lt;
                        config.timeout + 200)
                    {
                        window.location = config.download_url;
                    }
                    else
                    {

                    }
                }, config.timeout);

                window.onblur = function()
                {
                    clearTimeout(t);
                }
            }
            openclient();
            /*
            window.addEventListener(&quot;DOMContentLoaded&quot;, function()
            {
                document.getElementById(&quot;J-call-app&quot;).addEventListener(
                    'click', openclient, false);

            }, false);
            */
        })()
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

</div>

        <footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
                 <a href="/tags/other/">other</a>
            
        </p>
    

    <div class="share">
        <a class="icon-twitter" href="https://twitter.com/share?text=%e9%80%9a%e8%bf%87URL%20scheam%e5%94%a4%e8%b5%b7App&url=http%3a%2f%2fwww.xiaojiong.net%2f2015%2f08%2f04%2f%25E9%2580%259A%25E8%25BF%2587url-scheam%25E5%2594%25A4%25E8%25B5%25B7app%2f"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fa fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>

        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.xiaojiong.net%2f2015%2f08%2f04%2f%25E9%2580%259A%25E8%25BF%2587url-scheam%25E5%2594%25A4%25E8%25B5%25B7app%2f"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fa fa-facebook"></i>
            <span class="hidden">Facebook</span>
        </a>

        <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2fwww.xiaojiong.net%2f2015%2f08%2f04%2f%25E9%2580%259A%25E8%25BF%2587url-scheam%25E5%2594%25A4%25E8%25B5%25B7app%2f"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
           <i class="fa fa-google-plus"></i>
            <span class="hidden">Google+</span>
        </a>
    </div>
</footer>

        
    <div class="comments">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'XXX';
    var disqus_identifier = 'http:\/\/www.xiaojiong.net\/2015\/08\/04\/%E9%80%9A%E8%BF%87url-scheam%E5%94%A4%E8%B5%B7app\/';
    var disqus_title = '通过URL scheam唤起App';
    var disqus_url = 'http:\/\/www.xiaojiong.net\/2015\/08\/04\/%E9%80%9A%E8%BF%87url-scheam%E5%94%A4%E8%B5%B7app\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="Persistence" href="http://www.xiaojiong.net/">Persistence</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2016 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="http://www.xiaojiong.net/js/jquery-1.11.3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
        <script src="http://www.xiaojiong.net/js/jquery.fitvids.js"></script>
        <script src="http://www.xiaojiong.net/js/scripts.js"></script>
    </body>
</html>

